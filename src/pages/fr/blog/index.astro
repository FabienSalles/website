---
import Layout from '../../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog', ({ data }) => {
  return import.meta.env.PROD ? !data.draft : true;
});

const sortedPosts = posts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const allCategories = [...new Set(posts.flatMap(post => post.data.categories))].sort();
---

<Layout title="Blog - Fabien Salles" description="Articles sur l'artisanat logiciel, le développement et les bonnes pratiques">
  <!-- Le reste du contenu reste inchangé -->
</Layout>